<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Koodistot -</title>
    <link rel="stylesheet" href="../../common/tulli-bootstrap-style.css" type="text/css" />
    <link rel="stylesheet" href="../../common/tulli-mig-tables-style.css" type="text/css" />
</head>
<body class="Site">

    <nav class="navbar navbar-default navbar-static-top">
        <div class="container">
            <div class="navbar-header">
                <span class="navbar-text main-navbar">Koodistot p&auml;ivitetty </span>
                <a class="navbar-text" href="../../sv/pages/codes.html">Svenska</a>
                <a class="navbar-text" href="../../en/pages/codes.html">English</a>
            </div>
        </div>
        <!-- /.container -->
    </nav>
    <!-- /.navbar -->

    <header>
        <div class="upper">
            <div class="container">
                <div class="row">
                    <div class="col-md-3 col-sm-12 col-xs-12">
                        <a class="" href="../index.html">
                            <img class="img-responsive pull-left" src="../../../assets/images/logo-tulli.svg" alt="Finnish Customs logotype" /></a>

                        <button type="button" class="navbar-toggle collapsed pull-right margin-0" data-toggle="collapse" data-target="#navbar-mainmenu" aria-expanded="false" aria-controls="navbar-mainmenu">
                            <span class="sr-only">Valikko</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    </div>
                    <div class="col-md-9 col-sm-12 col-xs-12">
                        <nav id="navbar-mainmenu" role="menu" class="mainmenu collapse navbar-collapse">
                            <ul class="nav nav-pills">
                                <li>
                                    <a href="../index.html">P&auml;&auml;sivu</a>
                                </li>
                                <li>
                                    <a href="datamodel.html">Luokkakaavio</a>
                                </li>
                                <li>
                                    <a href="messageexchange.html">Sanomaliikenneopas</a>
                                </li>
                                <li>
                                    <a href="datarequirements.html">Tietosis&auml;ll&ouml;t</a>
                                </li>
                                <li class='current'>
                                    <a class='current' href="codes.html">Koodit</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        <div class="lower">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12">
                        <h1>Koodistot</h1>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="Site-content">
        <div class="col-xs-12" role="main">
            <div><a href="../../common/codelists.xml"><span class="icon icon-tulli-external" style="margin-right:3px"></span>Lataa koodistot XML-muodossa</a><p></p></div>
            <div class="panel panel-primary">
                <div class="panel-body" id="contents"></div>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <div class="row">
                &copy; Tulli 2018
	    
            </div>
        </div>
    </footer>
    <!-- Bootstrap core JavaScript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://www.promisejs.org/polyfills/promise-7.0.4.min.js"></script>
    <script src='../../../assets/javascripts/vendor/jquery.js'></script>
    <script type="text/javascript">
		$(document).ready(function(){
			$.ajax({
				url: '../../common/codelists.xml',
				type: 'GET',
				dataType: 'xml',
				success: function(returnedXMLResponse){
					$('Generated', returnedXMLResponse).each(function(){
						var version = new Date($(this).text());
                        version = version.toLocaleString("en-GB");
                        $(".main-navbar").append(version);

					})
				}  // End Success
			}); // End AJAX
		});
	</script>
    <script>
		$(document).ready(function(){
			$.ajax({
				url: '../../common/intro.xml',
				type: 'GET',
				dataType: 'xml',
				success: function(returnedXMLResponse){
					$('System[lang="fi"]', returnedXMLResponse).each(function(){
						var system = $(this).text();
                        document.title += " " + system;
					})
				}  // End Success
			}); // End AJAX
		});
	</script>
    <script>
      function loadXML(url) {
           return new Promise(function(resolve) {
             var req = new XMLHttpRequest();
             req.open("GET", url);
             if (typeof XSLTProcessor === 'undefined') {
               try {
                 req.responseType = 'msxml-document';
               }
               catch (e) {}
             }
             req.onload = function() {
               resolve(this.responseXML)
             }
             req.send();
           });
      }
      
      function transform(xmlUrl, xslUrl,targetElement) {
        Promise.all([loadXML(xmlUrl), loadXML(xslUrl)]).then(function(data) {
          var xmlDoc = data[0];
          var xslDoc = data[1];
          
          if (typeof XSLTProcessor !== 'undefined') {
            var proc = new XSLTProcessor();
            proc.importStylesheet(xslDoc);

            var resultFrag = proc.transformToFragment(xmlDoc, targetElement.ownerDocument);
            
            targetElement.textContent = '';
            targetElement.appendChild(resultFrag);
          }
          else {
              var template = new ActiveXObject('Msxml2.XslTemplate.6.0');
              template.stylesheet = xslDoc;
              var proc = template.createProcessor();
              
              proc.input = xmlDoc;
              
              proc.transform();
              
              var resultHTML = proc.output;
              
              targetElement.innerHTML = resultHTML;
          }
        });
      }
      document.addEventListener('DOMContentLoaded', function() {
        transform('../../common/codelists.xml', 'codelists.xsl', document.getElementById('contents'));      
      })
    </script>
    <script src='../../../assets/javascripts/bootstrap.js'></script>

    <script src='../../../assets/javascripts/custom-ui.js'></script>

    <script>

	$(function() {
		
	});

    </script>

</body>
</html>
